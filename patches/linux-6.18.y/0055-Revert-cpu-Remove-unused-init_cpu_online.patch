From 5a44829dea1493c3435bd476ace866a69e9b90f4 Mon Sep 17 00:00:00 2001
From: Johnny Mnemonic <jm@machine-hall.org>
Date: Mon, 27 Jan 2025 15:44:13 +0100
Subject: [PATCH 55/94] Revert "cpu: Remove unused init_cpu_online"

This reverts commit 7f15d4abf925f33015fb62973ce2ddb45ce04bb9.
---
 include/linux/cpumask.h | 1 +
 kernel/cpu.c            | 5 +++++
 2 files changed, 6 insertions(+)

diff --git a/include/linux/cpumask.h b/include/linux/cpumask.h
index ff8f41ab7ce6..cb4c33ad82e1 100644
--- a/include/linux/cpumask.h
+++ b/include/linux/cpumask.h
@@ -1129,6 +1129,7 @@ extern const DECLARE_BITMAP(cpu_all_bits, NR_CPUS);
 /* Wrappers for arch boot code to manipulate normally-constant masks */
 void init_cpu_present(const struct cpumask *src);
 void init_cpu_possible(const struct cpumask *src);
+void init_cpu_online(const struct cpumask *src);
 
 #define assign_cpu(cpu, mask, val)	\
 	assign_bit(cpumask_check(cpu), cpumask_bits(mask), (val))
diff --git a/kernel/cpu.c b/kernel/cpu.c
index 6cc7a543f576..4d1b6dc2b568 100644
--- a/kernel/cpu.c
+++ b/kernel/cpu.c
@@ -3121,6 +3121,11 @@ void init_cpu_possible(const struct cpumask *src)
 	cpumask_copy(&__cpu_possible_mask, src);
 }
 
+void init_cpu_online(const struct cpumask *src)
+{
+	cpumask_copy(&__cpu_online_mask, src);
+}
+
 void set_cpu_online(unsigned int cpu, bool online)
 {
 	/*
-- 
2.25.1

